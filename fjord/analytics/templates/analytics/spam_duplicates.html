{% extends "analytics/spam_dashboard.html" %}

{% block content %}
  {# Note: This is not l10n-ized since it's only available to analyzers for now. #}
  <div class="col full">
    <div class="block feedback">
      <h2>Spam: Duplicates over the last {{ n }} days ordered by most duplicate-y</h2>

      <table class="spamtable">
        <tbody>
          {% for desc, responses in response_dupes %}
            <tr>
              <td>
                <p>
                  <strong>Count:</strong> {{ responses|count }}
                </p>
                <p>
                  <strong>Range:</strong> {{ responses[0].created|datetime('%a %b %d %Y at %H:%M:%S') }} - {{ responses[-1].created|datetime('%a %b %d %Y at %H:%M:%S') }}
                </p>
                <p>
                  <strong>Description:</strong>
                </p>
                <p>{{ desc }}</p>
              </td>
              <td>
                <table class="details">
                  <tbody>
                    {% for resp in responses %}
                      <tr>
                        <td><a href="{{ url('response_view', responseid=resp.id) }}">{{ resp.id }}</a></td>
                        <td>{% if resp.happy %}Happy{% else %}Sad{% endif %}</td>
                        <td><p>{{ resp.created|datetime('%a %b %d %Y at %H:%M:%S') }}</p></td>
                        <td>{{ resp.locale }}</td>
                        <td>{{ resp.ua }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
